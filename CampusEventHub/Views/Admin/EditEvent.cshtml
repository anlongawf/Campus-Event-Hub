@model CampusEventHub.Models.Event

<!DOCTYPE html>
<html>
<head>
    <title>Ch·ªânh s·ª≠a s·ª± ki·ªán</title>
</head>
<body>
<h1>Ch·ªânh s·ª≠a s·ª± ki·ªán</h1>

@if (Model.Seats != null && Model.Seats.Any())
{
    <div class="seat-info">
        <strong>üìä Th√¥ng tin gh·∫ø:</strong>
        <p>T·ªïng s·ªë gh·∫ø: <strong>@Model.Seats.Count</strong></p>
        <p>Gh·∫ø tr·ªëng: <strong style="color: #28a745;">@Model.Seats.Count(s => s.Status == CampusEventHub.Models.SeatStatus.Available)</strong></p>
        <p>Gh·∫ø ƒë√£ ƒë·∫∑t: <strong style="color: #dc3545;">@Model.Seats.Count(s => s.Status == CampusEventHub.Models.SeatStatus.Booked)</strong></p>
        <p>Gh·∫ø b·ªã kh√≥a: <strong style="color: #ffc107;">@Model.Seats.Count(s => s.Status == CampusEventHub.Models.SeatStatus.Reserved)</strong></p>
    </div>
}

<form asp-action="EditEvent" asp-controller="Admin" method="post">
    <input type="hidden" asp-for="EventId" />

    <div class="form-group">
        <label asp-for="EventName">T√™n s·ª± ki·ªán *</label>
        <input asp-for="EventName" type="text" placeholder="Nh·∫≠p t√™n s·ª± ki·ªán" />
        <span asp-validation-for="EventName" class="validation-error"></span>
    </div>

    <div class="form-group">
        <label asp-for="Description">M√¥ t·∫£</label>
        <textarea asp-for="Description" placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ s·ª± ki·ªán"></textarea>
        <span asp-validation-for="Description" class="validation-error"></span>
    </div>

    <div class="form-group">
        <label asp-for="Location">ƒê·ªãa ƒëi·ªÉm</label>
        <input asp-for="Location" type="text" placeholder="Nh·∫≠p ƒë·ªãa ƒëi·ªÉm t·ªï ch·ª©c" />
        <span asp-validation-for="Location" class="validation-error"></span>
    </div>

    <div class="form-group">
        <label asp-for="EventDate">Ng√†y gi·ªù di·ªÖn ra *</label>
        <input asp-for="EventDate" type="datetime-local" />
        <span asp-validation-for="EventDate" class="validation-error"></span>
    </div>

    <div class="form-group">
        <label asp-for="TrainningPoint">ƒêi·ªÉm r√®n luy·ªán</label>
        <input asp-for="TrainningPoint" type="number" min="0" placeholder="Nh·∫≠p ƒëi·ªÉm r√®n luy·ªán" />
        <span asp-validation-for="TrainningPoint" class="validation-error"></span>
    </div>

    <div class="form-group">
        <label asp-for="ImageUrl">URL h√¨nh ·∫£nh</label>
        <input asp-for="ImageUrl" type="text" placeholder="https://example.com/image.jpg" id="imageUrl" />
        <span asp-validation-for="ImageUrl" class="validation-error"></span>

        @if (!string.IsNullOrEmpty(Model.ImageUrl))
        {
            <div class="image-preview">
                <img src="@Model.ImageUrl" alt="Event Image" id="previewImage" />
            </div>
        }
    </div>

    <div class="button-group">
        <button type="submit" class="btn-save">L∆∞u thay ƒë·ªïi</button>
        <a href="@Url.Action("Index", "Admin")" class="btn-cancel" style="text-decoration: none; display: inline-block; text-align: center; line-height: 1.5;">
            H·ªßy
        </a>
    </div>
</form>

<script>
    // Preview image khi thay ƒë·ªïi URL
    document.getElementById('imageUrl')?.addEventListener('input', function(e) {
        const url = e.target.value;
        const preview = document.getElementById('previewImage');
        if (preview && url) {
            preview.src = url;
            preview.onerror = function() {
                this.style.display = 'none';
            };
            preview.onload = function() {
                this.style.display = 'block';
            };
        }
    });
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
</body>
</html>